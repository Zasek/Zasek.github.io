---
layout: post
title: Effective Java阅读笔记
date: 2019-06-02
categories: blog
tags: [Java笔记]
description: Effective Java阅读笔记

---

这个系列是学习Effective Java 3rd Edition这本书的笔记。阅读带来的思考结合平日里的工程实践得出的经验，或许有些是对的，有些也有可能有问题。不过有个记录，总会比想过就过了印象好的多。

**第一条：用静态工厂方法代替构造器**
```java
public static Boolean valueOf(boolean b) {
    return b ? Boolean.True : Boolean.False;
}
```
这种方法返回了一个类的静态实例。那么为什么要在已经有构造函数的情况下依旧采用这种函数呢？可以说在项目中已经出现了一些类似的苗头吧，大家比较随意的书写构造方法，其实这个函数相当简单就能掌握，确实能够大大的提高程序的阅读行，一些场景中还能提高效率。接下来列出这种方式的优点和缺陷：

优势：

1. 可以指定静态工厂方法的方法名。当有可能存在多种创建一个对象的方法时，不停地重载构造器会造成使用者的混乱，甚至可能重载都很困难。在这种情况下没有文档，纯靠程序想实现自我解释是很困难的。静态工厂方法通过灵活的方法名可以解决这个问题。
    
2. 不必在每次调用时都创建新的对象。程序可以预先创建好对象，当需要时在方法里返回即可。可以帮助类来控制，在什么时刻应该有哪些类存在。

3. 静态工厂方法可以返回子类类型的对象，返回的类型可以随着输入的不同而不同，甚至可以返回当调用时不存在的类。构造器返回的对象类型过于死板，通过工厂方法我们可以获得更灵活的返回值。随着代码的更新，可以往方法里填充后续更新进来的子类。关于不存在的类，JDBC的API就是类似的实现。

缺陷：

1. 类总归还是要有public或者protected的构造器，要不然不能子类化。

2. 程序员很难发现类静态工厂方法。注意编码时有些个命名规范，应当遵守。